<html lang="en">
<head>
    <style>
        h1{
            text-align: center;
        }
    </style>
    <meta charset="UTF-8">
    <title>Organization Detail</title>
    <!-- Include any necessary scripts for your graph library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Organization Detail</h1>
    {% if organization %}
        <p>Name: {{ organization.organization.name }}</p>
        <p>EIN: {{ organization.organization.ein }}</p>
        <p>Address: {{ organization.organization.address}}, {{ organization.organization.city}}, {{ organization.organization.state}}, {{ organization.organization.zipcode}}</p>
        <p>Revenue Amount: ${{ organization.organization.revenue_amount}}</p>
        <div id="chart-container">
            <canvas id="myChart"></canvas>
        </div> <!-- Container for your graph -->
    {% else %}
        <p>No organization found</p>
    {% endif %}

    <!-- Add a button to navigate back to the home page -->
    <!-- <button onclick="window.location.href = './home.html/';">Back to Home</button> -->
    <!-- <button onclick="window.location.href = '{% url 'home' %}'">Go back to Home</button> -->





    <script type="text/javascript">
        // Extract data from the organization object
        var filingsWithData = JSON.parse("{{ filings_with_data_json|escapejs }}");
        console.log(filingsWithData);
        var tax_prd_yr = [];
        var totrevenue = [];
    
        // Iterate through the filings_with_data array
        for (var i = 0; i < filingsWithData.length; i++) {
            tax_prd_yr.push(filingsWithData[i].tax_prd_yr);
            totrevenue.push(filingsWithData[i].totrevenue);
        }
        console.log(tax_prd_yr);
    
        // Now you can use tax_prd_yr and totrevenue to create your graph using your preferred charting library
        // For example, using Chart.js
        var ctx = document.getElementById('myChart').getContext('2d'); // Change 'chart-container' to 'myChart'
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: tax_prd_yr,
                datasets: [{
                    label: 'Total Revenue',
                    data: totrevenue,
                    borderWidth: 1
                }]
            },
            options: {
                // Customize chart options as needed
            }
        });
    </script>
        
</body>
</html>